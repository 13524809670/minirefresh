/**
 * minirefresh - 一款极简的H5下拉刷新，内测版本
 * @version v0.0.2
 * @author dailc(dailichun@aliyun.com)
 * https://github.com/minirefresh/minirefresh
 */
!function(t){var e="minirefresh-skin-applet",n="minirefresh-downwrap",s="minirefresh-hardware-speedup",i="minirefresh-rotate",r="minirefresh-fade-in",o="minirefresh-fade-out",a="minirefresh-hidden",d=0,p=1,h=2,w="minirefresh-secret-garden",f={down:{offset:100,successAnim:{enable:!1},secretGarden:{enable:!0,offset:150,tips:"欢迎光临秘密花园"}}},c=t.skin.defaults.extend({init:function(e){e=t.extend(!0,{},f,e),this._super(e)},_initDownWrap:function(){var t=this.container,i=this.scrollWrap,r=this.options,o=document.createElement("div");o.className=n+" "+s,o.innerHTML='<div class="downwrap-content"><p class="downwrap-progress"></p><p class="downwrap-tips">'+r.down.contentdown+" </p></div>",t.insertBefore(o,i),t.classList.add(e),this.downWrap=o,this.downWrapProgress=this.downWrap.querySelector(".downwrap-progress"),this.downWrapTips=this.downWrap.querySelector(".downwrap-tips"),this.pullState=d,this.downWrapHeight=this.downWrap.offsetHeight||200,this._transformDownWrap(-1*this.downWrapHeight)},_transformDownWrap:function(t,e){t=t||0,e=e||0,this.downWrap.style.webkitTransitionDuration=e+"ms",this.downWrap.style.transitionDuration=e+"ms",this.downWrap.style.webkitTransform="translateY("+t+"px)  translateZ(0px)",this.downWrap.style.transform="translateY("+t+"px)  translateZ(0px)"},_pullHook:function(t,e){var n=this.options,s=n.down,i=s.secretGarden.enable,r=s.secretGarden.offset,o=t/e,a=(this.downWrapHeight*(-1+o),360*o);this._transformDownWrap(-this.downWrapHeight+t),this.downWrapProgress.style.webkitTransform="rotate("+a+"deg)",this.downWrapProgress.style.transform="rotate("+a+"deg)",t<e?this.pullState!==d&&(this.downWrapTips.innerText=s.contentdown,this.pullState=d):t>=e&&(!i||t<r)?this.pullState!==p&&(this.downWrapTips.innerText=s.contentover,this.pullState=p):this.pullState!==h&&(this.downWrapTips.innerText=s.secretGarden.tips,this.pullState=h)},_beforeDownLoadingHook:function(t,e){return this.pullState!==h||(this._inSecretGarden(),!1)},_downLoaingHook:function(){this.downWrapTips.innerText=this.options.down.contentrefresh,this.downWrapProgress.classList.add(i),this._transformDownWrap(-this.downWrapHeight+this.options.down.offset,this.options.down.bounceTime)},_downLoaingSuccessHook:function(){},_downLoaingEndHook:function(t){this.downWrapTips.innerText=this.options.down.contentdown,this.downWrapProgress.classList.remove(i),this._transformDownWrap(-this.downWrapHeight,this.options.down.bounceTime),this.pullState=d},_inSecretGarden:function(){this.secretGarden=document.querySelector("."+w),this.container.classList.add(o),this.secretGarden.classList.remove(a),this.secretGarden.classList.add(r)}});t.namespace("skin.taobao",c),window.MiniRefresh=c,"undefined"!=typeof module&&module.exports?module.exports=MiniRefresh:"function"==typeof define&&(define.amd||define.cmd)&&define(function(){return MiniRefresh})}(MiniRefreshTools);