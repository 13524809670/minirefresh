/**
 * minirefresh - 一款极简的H5下拉刷新，内测版本
 * @version v0.0.3
 * @author dailc(dailichun@aliyun.com)
 * https://github.com/minirefresh/minirefresh
 */
!function(t){var s="minirefresh-theme-taobao",n="minirefresh-downwrap",e="minirefresh-hardware-speedup",o="minirefresh-rotate",r="minirefresh-hidden",i=0,a=1,d=2,p=3,h=800,w="secret-garden-bg-in",c="secret-garden-bg-out",l="secret-garden-moon-in",W="secret-garden-moon-out",f={down:{offset:100,dampRate:.4,successAnim:{isEnable:!1},secretGarden:{isEnable:!0,offset:200,tips:"欢迎光临秘密花园",inSecretGarden:t.noop},isWrapCssTranslate:!0}},u=t.theme.defaults.extend({init:function(s){s=t.extend(!0,{},f,s),this._super(s)},_initDownWrap:function(){var t=this.container,o=this.scrollWrap,r=this.options,a=document.createElement("div");a.className=n+" "+e,a.innerHTML='<div class="downwrap-bg"></div><div class="downwrap-moon"></div><div class="downwrap-content"><p class="downwrap-progress"></p><p class="downwrap-tips">'+r.down.contentdown+"</p></div>",t.insertBefore(a,o),t.classList.add(s),this.downWrap=a,this.downWrapProgress=this.downWrap.querySelector(".downwrap-progress"),this.downWrapTips=this.downWrap.querySelector(".downwrap-tips"),this.downWrapBg=this.downWrap.querySelector(".downwrap-bg"),this.downWrapMoon=this.downWrap.querySelector(".downwrap-moon"),this.pullState=i,this.downWrapHeight=this.downWrap.offsetHeight||h,this._transformDownWrap(-1*this.downWrapHeight)},_transformDownWrap:function(t,s){this._super(t,s)},_rotateDownProgress:function(t){this.downWrapProgress.style.webkitTransform="rotate("+t+"deg)",this.downWrapProgress.style.transform="rotate("+t+"deg)"},_pullHook:function(t,s){var n=this.options,e=n.down,o=e.secretGarden.isEnable,i=e.secretGarden.offset,h=360,w=t/s,l=h*w;this._transformDownWrap(-this.downWrapHeight+t),this._rotateDownProgress(l),t<s?this.pullState!==a&&(this.downWrapBg.classList.remove(c),this.downWrapMoon.classList.remove(W),this.downWrapTips.classList.remove(r),this.downWrapProgress.classList.remove(r),this.downWrapTips.innerText=e.contentdown,this.pullState=a):t>=s&&(!o||t<i)?this.pullState!==d&&(this.downWrapTips.classList.remove(r),this.downWrapProgress.classList.remove(r),this.downWrapTips.innerText=e.contentover,this.pullState=d):this.pullState!==p&&(this.downWrapTips.classList.remove(r),this.downWrapProgress.classList.add(r),this.downWrapTips.innerText=e.secretGarden.tips,this.pullState=p)},_beforeDownLoadingHook:function(t,s){return this.pullState!==p||(this._inSecretGarden(),!1)},_downLoaingHook:function(){this.downWrapTips.innerText=this.options.down.contentrefresh,this.downWrapProgress.classList.add(o),this._transformDownWrap(-this.downWrapHeight+this.options.down.offset,this.options.down.bounceTime)},_downLoaingSuccessHook:function(){},_downLoaingEndHook:function(t){this.downWrapTips.innerText=this.options.down.contentdown,this.downWrapProgress.classList.remove(o),this._transformDownWrap(-this.downWrapHeight,this.options.down.bounceTime),this.pullState=i},_cancelLoaingHook:function(){this._transformDownWrap(-this.downWrapHeight,this.options.down.bounceTime),this.pullState=i},_secretGardenAnimation:function(t){var s=t?w:c,n=t?c:w,e=t?l:W,o=t?W:l;this.downWrapBg.classList.remove(n),this.downWrapBg.classList.add(s),this.downWrapMoon.classList.remove(o),this.downWrapMoon.classList.add(e)},_inSecretGarden:function(){var t=this.options.down.bounceTime,s=this.options.down.secretGarden.inSecretGarden;this.downWrapTips.classList.add(r),this.scroller.translateScrollWrap(this.scrollWrap.clientHeight,t),this._transformDownWrap(this.scrollWrap.clientHeight-this.downWrapHeight,t),this._secretGardenAnimation(!0),s&&s()},resetSecretGarden:function(){var t=this.options.down.bounceTime;this.scroller.translateScrollWrap(0,t),this._transformDownWrap(-1*this.downWrapHeight,t),this._secretGardenAnimation(!1),this.pullState=i}});t.namespace("theme.taobao",u),window.MiniRefresh=u,"undefined"!=typeof module&&module.exports?module.exports=u:"function"==typeof define&&(define.amd||define.cmd)&&define(function(){return u})}(MiniRefreshTools);