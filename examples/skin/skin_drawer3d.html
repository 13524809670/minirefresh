<!-- 
        作者：dailc
        时间：2017-08-25
        描述：  3D抽屉效果
-->
<!DOCTYPE html>
<html lang="zh-CN">

    <head>
        <meta charset="utf-8">
        <meta name="viewport" content="width=device-width, initial-scale=1,maximum-scale=1,user-scalable=no">
        <meta name="apple-mobile-web-app-capable" content="yes">
        <title>MiniFresh skin drawer3d</title>
        <link rel="stylesheet" href="../../dist/debug/minirefresh.css" />
        <link rel="stylesheet" href="../../dist/debug/skin/minirefresh.skin.drawer3d.css" />
        <style>
            * {
                -webkit-user-select: none;
            }
            
            .minirefresh-scroll {
                background: #FFFFFF;
            }
        </style>

    </head>

    <body>
        
        <div id="minirefresh" class="minirefresh-wrap">

            <div class="minirefresh-scroll">

                <ul class="data-list" id="listdata">
                    <li>111111111111111111111111111v</li>
                    <li>222222222222222222222222222</li>

                </ul>
            </div>
        </div>

        <script type="text/javascript" src="../../dist/debug/minirefresh.js"></script>
        <script type="text/javascript" src="../../dist/debug/skin/minirefresh.skin.drawer3d.js" ></script>
        <script>
            /**
             * 将string字符串转为html对象,默认创一个div填充
             * 因为很常用，所以单独提取出来了
             * @param {String} strHtml 目标字符串
             * @return {HTMLElement} 返回处理好后的html对象,如果字符串非法,返回null
             */
            function parseHtml(strHtml) {
                if (strHtml == null || typeof(strHtml) != "string") {
                    return null;
                }
                // 创一个灵活的div
                var i, a = document.createElement("div");
                var b = document.createDocumentFragment();
                a.innerHTML = strHtml;
                while (i = a.firstChild) b.appendChild(i);
                return b;
            }

            for　 (var i = 0; i < 20; i++) {
                var child = parseHtml('<li>1111111111111111111111</li><li>22222222222222222222222</li><li>1333333333333333333333333333</li><li>544444444444444444444444444</li>');
                document.querySelector('#listdata').appendChild(child);
            }

            var miniRefresh = new MiniRefresh({
                container: '#minirefresh',
                down: {
                    bounceTime: 1000,
                    callback: function() {
                        setTimeout(function() {
                            miniRefresh.endDownLoading(true);
                        }, 1000);
                    },
                    successAnim: {
                        enable: false
                    }
                },
                up: {
                    auto: true,
                    callback: function() {
                        setTimeout(function() {
                            // TODO:暂时的测试代码
                            var child = parseHtml('<li>333333333333333333333333333333</li><li>544444444444444444444444444</li><li>333333333333333333333333333333</li><li>544444444444444444444444444</li><li>333333333333333333333333333333</li><li>544444444444444444444444444</li>');
                            document.querySelector('#listdata').appendChild(child);
                            miniRefresh.endUpLoading(true, true);
                        }, 1000);
                    },
                    loadFull: {
                        // 开启配置后，只要没满屏幕，就会自动加载
                        enable: true,
                        delay: 300
                    }
                }
            });
        </script>
    </body>

</html>